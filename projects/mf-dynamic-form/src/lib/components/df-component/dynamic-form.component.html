<small *ngIf="!isFormReady">Chargement...</small>
<div *ngIf="formGroup" [class.visibility-0]="!isFormReady">
	<form [formGroup]="formGroup" class="mf-form">

		<ng-container *ngFor="let step of steps; let i = index">
		<div class="row" [hidden]="i != activeStep">
			<h6 *ngIf="stepper && !suppressStepLabel"
				[hidden]="!isActiveStep(i)"
				class="col-md-12">{{step.label}}</h6>

			<div class="form-root">
				<div class="content">
					<div class="section" *ngFor="let section of step.sections">
						<p class="title color-gray-dark">
							{{section.label}}
						</p>
						<ng-container *ngFor="let control of section.controls">
							<div *ngIf="!control.hidden"
								 [hidden]="!isActiveStep(i)">
							</div>
							<df-form-control [control]="control"
											 [form]="formGroup"
                       [showEmptyReadOnlyFields]="showEmptyReadOnlyFields"
											 [i18n]="i18n"></df-form-control>
						</ng-container>
					</div>
				</div>
			</div>
		</div>

		</ng-container>
		<ng-container *ngIf="!suppressControls">
			<div [ngClass]="controlsClass">
				<button (click)="goToPreviousStep()"
                [ngClass]="previousButtonClass"
                *ngIf="!isFirstStep"
						class="btn btn-secondary">
          <span class="pointer mr-1">
            &laquo; {{i18n.previous}}
          </span>
				</button>
				<button (click)="goToNextStep()" *ngIf="!isLastStep"
                [ngClass]="nextButtonClass"
						class="btn btn-secondary">
         <span class="pointer mr-1">
          {{i18n.next}} &raquo;
          </span>
				</button>
				<button (click)="submit()"
						*ngIf="isLastStep"
                [ngClass]="saveButtonClass"
						class="btn btn-primary"
						type="submit"
				>{{i18n.save}}
				</button>
				<button (click)="printDebugDataToConsole()" *ngIf="debugMode" class="btn btn-danger">Print debug data</button>
			</div>
		</ng-container>
	</form>

</div>
